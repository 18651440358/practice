<template>
  <div class="zc-card-forecast-cancer">
    <div class="title-group">
      <h3>ç™Œç—‡ç—…ä¾‹è¯Šæ–­</h3>
    </div>
    <div class="card-content">
      <div class="left">
        <div class="input-group">
          <label>ç—…äººå¹´é¾„</label>
          <zc-dropdown>
            <div class="input-value">
              <span>{{ageValue[forecast.age] || 'è¯·é€‰æ‹©'}}</span>
              <i class="fi-br-angle-small-down"></i>
            </div>
            <zc-dropdown-menu  slot="zc-dropdown-menu">
              <ul class="dropdown-menu" style="height: 250px">
                <vuescroll :ops="ops">
                  <zc-dropdown-item @click.native="ageHandle(index)" class="dropdown-item" :key="'age'+index" :command="index" v-for="(item,index) in ageValue">{{item}}</zc-dropdown-item>
                </vuescroll>
              </ul>
            </zc-dropdown-menu>
          </zc-dropdown>
        </div>
        <div class="input-group">
          <label>æ˜¯å¦ç»ç»</label>
          <zc-dropdown @command="menopauseHandle">
            <div class="input-value">
              <span>{{menopauseValue[forecast.menopause] || 'è¯·é€‰æ‹©'}}</span>
              <i class="fi-br-angle-small-down"></i>
            </div>
            <zc-dropdown-menu  slot="zc-dropdown-menu">
              <ul class="dropdown-menu">
                <zc-dropdown-item class="dropdown-item" :key="'menopause'+index" :command="index" v-for="(item,index) in menopauseValue">{{item}}</zc-dropdown-item>
              </ul>
            </zc-dropdown-menu>
          </zc-dropdown>
        </div>
        <div class="input-group">
          <label>è‚¿ç˜¤å¤§å°</label>
          <zc-dropdown>
            <div class="input-value">
              <span>{{tumorValue[forecast.tumor] || 'è¯·é€‰æ‹©'}}</span>
              <i class="fi-br-angle-small-down"></i>
            </div>
            <zc-dropdown-menu  slot="zc-dropdown-menu">
              <ul class="dropdown-menu" style="height: 250px">
                <vuescroll :ops="ops">
                  <zc-dropdown-item @click.native="tumorHandle(index)" class="dropdown-item" :key="'tumor'+index" :command="index" v-for="(item,index) in tumorValue">{{item}}</zc-dropdown-item>
                </vuescroll>
              </ul>
            </zc-dropdown-menu>
          </zc-dropdown>
        </div>
        <div class="input-group">
          <label>æ·‹å·´ç»“ä¸ªæ•°</label>
          <zc-dropdown>
            <div class="input-value">
              <span>{{invValue[forecast.inv] || 'è¯·é€‰æ‹©'}}</span>
              <i class="fi-br-angle-small-down"></i>
            </div>
            <zc-dropdown-menu  slot="zc-dropdown-menu">
              <ul class="dropdown-menu" style="height: 250px">
                <vuescroll :ops="ops">
                  <zc-dropdown-item @click.native="invHandle(index)" class="dropdown-item" :key="'inv'+index" :command="index" v-for="(item,index) in invValue">{{item}}</zc-dropdown-item>
                </vuescroll>
              </ul>
            </zc-dropdown-menu>
          </zc-dropdown>
        </div>
        <div class="input-group">
          <label>æ˜¯å¦æœ‰ç»“èŠ‚å†’</label>
          <zc-dropdown @command="capsHandle">
            <div class="input-value">
              <span>{{capsValue[forecast.caps] || 'è¯·é€‰æ‹©'}}</span>
              <i class="fi-br-angle-small-down"></i>
            </div>
            <zc-dropdown-menu  slot="zc-dropdown-menu">
              <ul class="dropdown-menu">
                <zc-dropdown-item class="dropdown-item" :key="'caps'+index" :command="index" v-for="(item,index) in capsValue">{{item}}</zc-dropdown-item>
              </ul>
            </zc-dropdown-menu>
          </zc-dropdown>
        </div>
      </div>
      <div class="right">
        <div class="input-group">
          <label>è‚¿ç˜¤æ¶æ€§ç¨‹åº¦</label>
          <zc-dropdown @command="maligHandle">
            <div class="input-value">
              <span>{{maligValue[forecast.malig] || 'è¯·é€‰æ‹©'}}</span>
              <i class="fi-br-angle-small-down"></i>
            </div>
            <zc-dropdown-menu  slot="zc-dropdown-menu">
              <ul class="dropdown-menu">
                <zc-dropdown-item class="dropdown-item" :key="'malig'+index" :command="index" v-for="(item,index) in maligValue">{{item}}</zc-dropdown-item>
              </ul>
            </zc-dropdown-menu>
          </zc-dropdown>
        </div>
        <div class="input-group">
          <label>è‚¿ç˜¤å‡ºç°ä½ç½®</label>
          <zc-dropdown @command="breastHandle">
            <div class="input-value">
              <span>{{breastValue[forecast.breast] || 'è¯·é€‰æ‹©'}}</span>
              <i class="fi-br-angle-small-down"></i>
            </div>
            <zc-dropdown-menu  slot="zc-dropdown-menu">
              <ul class="dropdown-menu">
                <zc-dropdown-item class="dropdown-item" :key="'breast'+index" :command="index" v-for="(item,index) in breastValue">{{item}}</zc-dropdown-item>
              </ul>
            </zc-dropdown-menu>
          </zc-dropdown>
        </div>
        <div class="input-group">
          <label>è‚¿ç˜¤å‡ºç°è±¡é™</label>
          <zc-dropdown @command="quadHandle">
            <div class="input-value">
              <span>{{quadValue[forecast.quad] || 'è¯·é€‰æ‹©'}}</span>
              <i class="fi-br-angle-small-down"></i>
            </div>
            <zc-dropdown-menu  slot="zc-dropdown-menu">
              <ul class="dropdown-menu">
                <zc-dropdown-item class="dropdown-item" :key="'quad'+index" :command="index" v-for="(item,index) in quadValue">{{item}}</zc-dropdown-item>
              </ul>
            </zc-dropdown-menu>
          </zc-dropdown>
        </div>
        <div class="input-group">
          <label>æ˜¯å¦æœ‰æ”¾å°„æ€§æ²»ç–—ç»å†</label>
          <zc-dropdown @command="irradiatHandle">
            <div class="input-value">
              <span>{{irradiatValue[forecast.irradiat] || 'è¯·é€‰æ‹©'}}</span>
              <i class="fi-br-angle-small-down"></i>
            </div>
            <zc-dropdown-menu  slot="zc-dropdown-menu">
              <ul class="dropdown-menu">
                <zc-dropdown-item class="dropdown-item" :key="'irradiat'+index" :command="index" v-for="(item,index) in irradiatValue">{{item}}</zc-dropdown-item>
              </ul>
            </zc-dropdown-menu>
          </zc-dropdown>
        </div>
        <div class="button-group">
          <a @click="clearValue">æ¸…é™¤é€‰æ‹©</a>
          <a @click="startForecast">å¼€å§‹é¢„æµ‹</a>
        </div>
        <div class="forecast-value" :class="[{'health':forecastClass===0},{'danger':forecastClass===1}]">{{forecastValue[forecastClass]}}</div>
      </div>
    </div>
  </div>
</template>

<script>
import ZcDropdown from "@/components/dropdown/dropdown";
import ZcDropdownMenu from "@/components/dropdown-menu/dropdown-menu";
import ZcDropdownItem from "@/components/dropdown-item/dropdown-item";
import vuescroll from 'vuescroll';
import axios from "axios";
export default {
  name: "zc-card-forecast-cancer",
  components: {ZcDropdownItem, ZcDropdownMenu, ZcDropdown, vuescroll},
  data() {
    return {
      ops: {
        bar: {
          background: '#8950fc',
        }
      },
      forecastClass: -1,
      forecast: {
        age: -1,
        menopause: -1,
        tumor: -1,
        inv: -1,
        caps: -1,
        malig: -1,
        breast: -1,
        quad: -1,
        irradiat: -1
      },
      // ageå–å€¼
      ageValue: ["10-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-99"],
      menopauseValue: ['40å²ä¹‹å‰','40å²ä»¥å','æ²¡æœ‰ç»ç»'],
      tumorValue: ['0-4', '5-9', '10-14', '15-19', '20-24', '25-29', '30-34', '35-39', '40-44', '45-49', '50-54', '55-59'],
      invValue: ['0-2', '3-5', '6-8', '9-11', '12-14', '15-17', '18-20', '21-23', '24-26', '27-29', '30-32', '33-35', '36-39'],
      capsValue: ['æœ‰ç»“èŠ‚å†’', 'æ²¡æœ‰ç»“èŠ‚å†’'],
      maligValue: ['ç­‰çº§ä¸€' ,'ç­‰çº§äºŒ', 'ç­‰çº§ä¸‰'],
      breastValue: ['å·¦ä¾§' ,'å³ä¾§'],
      quadValue: ['å·¦ä¸Šï¼ˆç¬¬ä¸€è±¡é™ï¼‰', 'å·¦ä¸‹ï¼ˆç¬¬å››è±¡é™ï¼‰', 'å³ä¸Šï¼ˆç¬¬äºŒè±¡é™ï¼‰', 'å³ä¸‹ï¼ˆç¬¬ä¸‰è±¡é™ï¼‰', 'ä¸­é—´éƒ¨ä½'],
      irradiatValue: ['æ‹¥æœ‰', 'ä»æœª'],
      forecastValue: ['å¥åº·', 'ç¡®è¯Šç™Œç—‡']
    }
  },
  methods: {
    ageHandle(value) {
      this.forecast.age = value;
    },
    menopauseHandle(value) {
      this.forecast.menopause = value;
    },
    tumorHandle(value) {
      this.forecast.tumor = value;
    },
    invHandle(value) {
      this.forecast.inv = value;
    },
    capsHandle(value) {
      this.forecast.caps = value;
    },
    maligHandle(value) {
      this.forecast.malig = value;
    },
    breastHandle(value) {
      this.forecast.breast = value;
    },
    quadHandle(value) {
      this.forecast.quad = value;
    },
    irradiatHandle(value) {
      this.forecast.irradiat = value;
    },
    // å¼€å§‹é¢„æµ‹
    startForecast(){
      for(var item in this.forecast){
        if(this.forecast[item] === -1){
          this.$rbNote({
            title: 'è¯·æ£€æŸ¥è¡¨å•',
            messageType: 'warning',
            message: 'æ‚¨è¾“å…¥çš„å†…å®¹ä¸èƒ½ä¸ºç©ºğŸ˜…ã€‚'
          })
          return
        }
      }
        this.$rbNote({
          title: 'æ­£åœ¨è¯Šæ–­',
          messageType: 'loading',
          message: 'æ­£åœ¨è¿æ¥æœåŠ¡å™¨ã€‚ã€‚ã€‚'
        })
        axios.post(this.$domain + '/forecast/cancer', {
          forecast: this.forecast
        })
            .then(res => {
              this.forecastClass = res.data
            })

    },
    // æ¸…ç©ºé€‰æ‹©
    clearValue() {
      this.forecast = {
            age: -1,
            menopause: -1,
            tumor: -1,
            inv: -1,
            caps: -1,
            malig: -1,
            breast: -1,
            quad: -1,
            irradiat: -1
      }
      this.forecastClass = -1
    }
  }
}
</script>

<style scoped lang="scss">
  .zc-card-forecast-cancer{
    background: #fff;
    height: 100%;
    border-radius: 8px;
    padding: 30px;
    padding-top: 20px;
    box-shadow: 0 0 30px 0 rgba(82,63,105, .05);
  }
  // æ ‡é¢˜
    .title-group{
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-bottom: 20px;
    }
    // ä¸»ä½“éƒ¨åˆ†
    .card-content{
      display: flex;
      align-items: stretch;
      //margin-top: 10px;
    }
    .card-content > div{
      width: 50%;
    }
    .card-content .left{
      padding-right: 15px;
    }
    .card-content .right{
      padding-left: 15px;
    }
    .input-group{
      display: flex;
      flex-direction: column;
      margin-top: 10px;
    }
    .input-group label{
      margin-bottom: 5px;
      font-size: 15px;
      font-weight: 600;
    }
    // ä¸‹æ‹‰æ¡†
    .input-value{
      width: 100%;
      height: 48px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      background-color: #f3f3f4;
      color: #5e6278;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
    }
    .dropdown-menu{
      width: 200px;
      padding: 10px 0;
      box-shadow: 0 0 30px 0 rgba(82,63,105, .05);
      background: #fff;
    }
    .dropdown-item{
      cursor: pointer;
      padding: 15px;
      font-weight: 600;
    }
    .dropdown-item:hover{
      background: #f3f3f4;
    }
    .button-group{
      display: flex;
      flex-direction: row;
      align-items: center;
      margin-top: 15px;
      justify-content: flex-end;
    }
    .button-group a{
      padding: 10px 15px;
      border-radius: 8px;
      background: #f3f3f4;
      color: #5e6278;
      font-weight: 600;
      margin-left: 10px;
    }
    .button-group a:last-child{
      background: #f64e60;
      color: #fff;
    }
    .forecast-value.health{
      margin-top: 10px;
      color: #50CD89;
      font-weight: 600;
    }
    .forecast-value.danger{
      margin-top: 10px;
      color: #f64e60;
      font-weight: 600;
    }
</style>
